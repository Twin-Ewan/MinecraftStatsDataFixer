<html>
  <head>
    <!DOCTYPE html>

    <script src='./script.js'></script>
    <link rel="stylesheet" type="text/css" href="./style.css"/>

    <title>Minecraft Statistics DataFixer</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">

    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    
  </head>

  <body>
      <div id="usage">
        <h2>Usage</h2>
        <h4>File Name</h4>
        <p>From 13w36a to 1.7.5/14w05b the game used the player's name as the name of the statistics file, this was
          then changed to the player's UUID to allow for players to change their name and still be able to keep their all
          their data. 
        </p>

        <p>Thankfully Mojang did implement a datafixer for this - besides a small gap in 18w03a to 18w19b (1.13)?
          - and with it always being the first thing that gets datafixed once upgrading you can always name the outputted 
          file a player's name and the game will rename it to the correct version, if necessary.
        </p>

	<h4 style="text-align:center; padding-top:20px">Who to complain to</h4>
        <p>
         If there is any issues with this program and or you find another issue with statistics please say in the
         <a href="https://github.com/Twin-Ewan/MinecraftStatsDataFixer/issues">issues section of the GitHub repo</a>!
         I would hate to mess up someone's data like that, even something so minor (always take backups!). 
        </p>
      </div>

      <div id="datafixer"">

        <label>Target Version</label>
          <select id="targetVer">
            <option value="1">13w37a (1.7.2) - 1.7.10 / 14w05b (1.8)</option>
            <option value="2">14w06a (1.8) - 1.10.2</option>
            <option value="3">16w32a - 16w35a (1.11)</option>
            <option value="4">16w36a (1.11) - 17w46a (1.13)</option>
            <option value="5">17w47a (1.13)</option>
            <option value="6">17w47b - 1.13-pre4 (1.13)</option>
            <option value="7">1.13-pre5 - 23w46a (1.20.3)</option>
            <option value="8">1.20.3-pre1 - Present</option>
          </select>   

          
          <label for="fileInput" class="custom-file-upload">Open Statistics File</label>
          <input id="fileInput" type="file" onchange="filePreview()"/>
          
          <p id="filePreviewName"></p>
          <pre id="filePreview" style="font-size: smaller; padding: 0px 20px; overscroll-behavior: contain;"></pre>
          
        <button id="dataFix" onclick="Load()">Start DataFixerUpper</button>

      </div>

      <div id="explanation">

        <h2>Explanations</h2>
        <h4>Unlit Redstone Torch</h4>
        <p>In 13w36a/b (1.7.2) the redstone torch statistics uses the unlit version 
          <a href="https://mcdf.wiki.gg/wiki/Java_Edition:Unlit_Redstone_Torch_(Item)"> which then got deleted in 13w37a</a>
          causing all their corresponding statistics to be deleted along side.
        </p>

        <h4>Namespace IDs</h4>
        <p>In 14w03a (1.8) minecraft started its switch from numerical to namespace - I.e <code>#0003</code> into 
          <code>minecraft:dirt</code> - for blocks and items, this hit the statistics in 14w06a but Mojang never added a 
          datafixer ever for upgrading numeric IDs deleting all blocks and items once upgrading after 14w05b.
        </p>

        <h4>Entity Rename</h4>
        <p>In 16w32a (1.11) entity names were changed from <a href="https://en.wikipedia.org/wiki/Camel_case">UpperCamelCase</a> 
          to <a href="https://en.wikipedia.org/wiki/Snake_case">lower_snake_case</a> and the statistics followed suit, but
          they failed to add a datafixer for these meaning once upgrading, all entity killed and killed by statistics 
          are deleted.
        </p>

        <h4>Entity Rename Reverted</h3>
        <p>
          The entity renames for the statistics then <a href="https://mojira.dev/MC-106314">later gets reverted in 16w36a (1.11)</a> 
          back to the old format but with the mobs that became seperate use their new names: this effects horses, donkeys, mules, 
          skeleton horses and zombie horses all being seperated from <code>EntityHorse</code>, skeletons, wither skeletons and strays from 
          <code>Skeleton</code> and zombies, zombie villagers and husks from <code>Zombie</code> all into their own seperate entities 
          instead of being a tag on the base entity. 
        </p>
        <p>
          Due to skeleton and zombies still having the same name from before the changes, they upgrade to 16w36a and beyond perfectly fine
          but the horses do not, meaning no matter what, when upgrading to versions after 1.10.2 it will always delete the kills and killed by horse
          statistics.
        </p>

	
	<h4>Flattening</h4>
	<p>
          As with most things, 17w47a (1.13) - also known as the start of "<a href="https://minecraft.wiki/w/Java_Edition_Flattening">The Flattening</a>" -
          reworked at lot of things, including how statistics are stored: no more <code>stat.useItem.minecraft.&#60ID&#62</code> now each entry is stored in its 
          own section to do with that specific stat - I.e "dropped", "used", "crafted" etc. - <a href="https://mojira.dev/MC-124025">and with the offical 
          datafixer for this not being created until 1.13-pre3</a> means playing in versions between 17w47a and 1.13-pre3 will delete all statistics.
	</p>
	<p>
          As well as reworking the statistic format The Flattening also reworked how items worked, importantly for us, spawn eggs. Before, all spawn eggs shared
          the same ID and either had a DV pre-15w33a (1.9) pertaining to that <a href="https://minecraft.wiki/w/Java_Edition_pre-flattening_data_values#Entity_IDs">
          entity's internal ID</a> - I.e Creeper = 50, FallingSand = 21, MinecartCommandBlock = 40 etc. - or afterwards, having a <code>EntityTag ID</code>
          of that specific mob - "creeper", "falling_block", "commandblock_minecart". But after The Flattening they seperated them all into their own items,
          leaving <a href="https://mojira.dev/MC-124025">the generic "spawn_egg" stats without a corresponding item</a>.
	</p>
        <p>
         They also just accidently forgot to update to update terracotta's name. whoopies.
        </p>

        <h4>Flattening Cont.</h4>
        <p>
         They fixed the ID of terracotta in 17w47b (1.13).
	</p>

        <h4>Flattening Cont. Cont.</h4>
        <p>
         In 1.13-pre3 the flattening was slowing down but one of the last few things they did was update a few entities ID's that were strangely named. this included:
	</p>

        <table style="width:100%;text-align:center";>
          <tr>
            <th>1.12Â ID</th> <th>1.13 ID</th>
          </tr>
          <tr>
            <td>evocation_illager</td> <td>evoker</td>
          </tr>
          <tr>
            <td>vindication_illager</td> <td>vindicator</td>
          </tr>
          <tr>
            <td>illusion_illager</td> <td>illusioner</td>
          </tr>
          <tr>
            <td>evocation_fangs</td> <td>evoker_fangs</td>
          </tr>
          <tr>
            <td>commandblock_minecart</td> <td>command_block_minecart</td>
          </tr>
          <tr>
            <td>eye_of_ender_signal</td> <td>eye_of_ender</td>
          </tr>
          <tr>
            <td>fireworks_rocket</td> <td>firework_rocket</td>
          </tr>
          <tr>
            <td>snowman</td> <td>snow_golem</td>
          </tr>
          <tr>
            <td>villager_golem</td> <td>iron_golem</td>
          <tr>
            <td>xp_bottle</td> <td>experience_bottle</td>
          </tr>
          <tr>
            <td>xp_orb</td> <td>experience_orb</td>
          </tr>
        </table>

        <p>
         Mojang did these changes without adding a data fixer initally, meaning once upgrading into this version <a href="https://mojira.dev/MC-132320">all entities statistics
         are deleted</a>.
        </p>

        <h4>Grass into Short_Grass</h4>
        <p>
         In 1.20.3-pre1 the item ID of grass (not block of, nor double tall) was changed to <code>short_grass</code>, Mojang forgot a datafixer initally and as such <a href="https://mojira.dev/MC-266890">
         all related statistics are deleted</a> once upgrading to this version.
	</p>
      </div>

  </body>
</html>